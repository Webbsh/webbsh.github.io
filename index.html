<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Olympic Journey Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: "Warm Neutral" - A calming and focused palette using beige, slate, stone, and a subtle gold accent to represent the Olympic goal. -->
    <!-- Application Structure Plan: A dashboard-style SPA. The top features key metric cards for the selected week (mileage, long run) and a phase selector. The main visual is an an interactive line chart of the 52-week mileage progression. Below, a "Weekly Detail" section dynamically updates with the full plan (running, strength, nutrition, recovery) for the selected week. This structure was chosen to provide a high-level overview (the chart) while allowing for easy drill-down into specific weekly tasks without information overload, which is ideal for a long-term, data-driven plan. -->
    <!-- Visualization & Content Choices: 
        - Report Info: 52-week mileage data -> Goal: Show change/progression -> Viz: Line Chart -> Interaction: Hover for tooltips, click to update details -> Justification: Best for time-series data, shows gradual build-up and recovery weeks clearly -> Library: Chart.js (Canvas).
        - Report Info: Training Phases -> Goal: Organize/Filter -> Method: Interactive Buttons -> Interaction: Click to filter chart data -> Justification: Breaks the year into manageable chunks, reducing cognitive load -> Library/Method: JS + Tailwind.
        - Report Info: Weekly Plan Details -> Goal: Inform -> Method: Dynamic Text Blocks with Unicode Icons -> Interaction: Updates on week selection -> Justification: Clear, scannable format for instructions -> Library/Method: JS + HTML.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #44403C; /* stone-800 */
            color: #F5F5F4; /* stone-100 */
        }
        .kpi-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body class="text-stone-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-stone-900">Your Olympic Journey</h1>
            <p class="mt-2 text-lg text-stone-600">A 52-Week Plan to Build the Foundation for Gold</p>
        </header>

        <main>
            <!-- Key Metrics Section -->
            <section id="kpi-section" class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-8">
                <div class="kpi-card text-center">
                    <h2 class="text-lg font-semibold text-stone-500">Selected Week</h2>
                    <p id="kpi-week" class="text-4xl font-bold text-amber-600">-</p>
                    <p id="kpi-week-dates" class="text-stone-500">-</p>
                </div>
                <div class="kpi-card text-center">
                    <h2 class="text-lg font-semibold text-stone-500">Weekly Mileage Goal</h2>
                    <p id="kpi-mileage" class="text-4xl font-bold text-amber-600">-</p>
                    <p class="text-stone-500">Total Miles</p>
                </div>
                <div class="kpi-card text-center">
                    <h2 class="text-lg font-semibold text-stone-500">Long Run Focus</h2>
                    <p id="kpi-long-run" class="text-4xl font-bold text-amber-600">-</p>
                    <p class="text-stone-500">Minutes</p>
                </div>
            </section>

            <!-- Chart and Filters Section -->
            <section class="bg-white p-4 sm:p-6 rounded-xl shadow-lg mb-8">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4">
                    <h2 class="text-2xl font-bold mb-2 sm:mb-0">52-Week Mileage Progression</h2>
                    <div id="phase-filters" class="flex flex-wrap gap-2">
                        <button data-phase="all" class="nav-button active text-sm px-3 py-1 bg-stone-200 text-stone-700 rounded-full">All Phases</button>
                        <button data-phase="1" class="nav-button text-sm px-3 py-1 bg-stone-200 text-stone-700 rounded-full">Phase 1</button>
                        <button data-phase="2" class="nav-button text-sm px-3 py-1 bg-stone-200 text-stone-700 rounded-full">Phase 2</button>
                        <button data-phase="3" class="nav-button text-sm px-3 py-1 bg-stone-200 text-stone-700 rounded-full">Phase 3</button>
                        <button data-phase="4" class="nav-button text-sm px-3 py-1 bg-stone-200 text-stone-700 rounded-full">Phase 4</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="mileageChart"></canvas>
                </div>
                 <p class="text-center text-xs text-stone-500 mt-4">This chart shows your planned weekly running mileage. Click on any point to see the detailed plan for that week.</p>
            </section>

            <!-- Weekly Detail Section -->
            <section id="weekly-detail" class="bg-white p-4 sm:p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-bold mb-1">Detailed Plan: Week <span id="detail-week-number">-</span></h2>
                <p class="text-stone-500 mb-6" id="detail-week-phase">Select a week on the chart to see details.</p>
                
                <div id="detail-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Dynamic content will be injected here -->
                </div>
            </section>
        </main>

        <footer class="text-center mt-12 py-4 border-t border-stone-200">
            <p class="text-stone-500">"I can do all this through him who gives me strength." - Philippians 4:13</p>
            <p class="text-xs text-stone-400 mt-2">Your Olympic Journey Dashboard | Plan generated for 2025-2026</p>
        </footer>
    </div>

    <script>
        const trainingData = [
            { week: 1, dates: "Jul 28 - Aug 3", phase: 0, mileage: 4.5, longRun: 20, runFocus: "Garmin 5K Plan: Week 5. Continue as prescribed.", strength: "2-3 Sessions: Bodyweight Squats, Plank, Glute Bridges, Calf Raises.", nutrition: "Continue current meals. Focus on no fatback in crockpot.", recovery: "Prioritize sleep (7-9 hrs). Stretch after runs." },
            { week: 2, dates: "Aug 4 - Aug 10", phase: 0, mileage: 5.0, longRun: 25, runFocus: "Garmin 5K Plan: Week 6. Mileage likely increasing slightly.", strength: "2-3 Sessions: Add Lunges, Push-ups (on knees/wall).", nutrition: "Try to add frozen veggies to lunch sandwich.", recovery: "Active recovery: light walk on rest days." },
            { week: 3, dates: "Aug 11 - Aug 17", phase: 0, mileage: 5.5, longRun: 25, runFocus: "Garmin 5K Plan: Week 7.", strength: "2-3 Sessions: Add Supermans, Bird-Dog.", nutrition: "Explore whole grain cornmeal for Jiffy cornbread (less sugar).", recovery: "Listen to your body. If tired, take an extra rest day." },
            { week: 4, dates: "Aug 18 - Aug 24", phase: 0, mileage: 6.0, longRun: 30, runFocus: "Garmin 5K Plan: Week 8.", strength: "2-3 Sessions: Add Step-ups (using porch step).", nutrition: "Look for affordable fruit (apples, bananas) for snacks.", recovery: "Consistency is key. You are glorifying God with your discipline." },
            { week: 5, dates: "Aug 25 - Aug 31", phase: 0, mileage: 6.5, longRun: 30, runFocus: "Garmin 5K Plan: Week 9.", strength: "2-3 Sessions: Focus on perfect form for all exercises.", nutrition: "Consider canned tuna/chicken for lunch protein if budget allows.", recovery: "Celebrate your progress! You're nearing the 5K completion." },
            { week: 6, dates: "Sep 1 - Sep 7", phase: 0, mileage: 7.0, longRun: 30, runFocus: "Garmin 5K Plan: Week 10. Final push for your 5K!", strength: "2-3 Sessions: Maintain strength, maybe slightly reduce reps.", nutrition: "Continue focusing on increased pintos for dinner protein.", recovery: "Visualize your 5K race. Trust your training." },
            { week: 7, dates: "Sep 8 - Sep 14", phase: 1, mileage: 7.0, longRun: 30, runFocus: "Post-5K Week 1. 3-4 Easy Runs.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Reinforce whole-grain bread for sandwich if feasible.", recovery: "Focus on easy pace. No need to push speed yet." },
            { week: 8, dates: "Sep 15 - Sep 21", phase: 1, mileage: 7.7, longRun: 35, runFocus: "3-4 Easy Runs. One run 30-35 min.", strength: "2-3 Sessions: Continue all bodyweight exercises.", nutrition: "Add cinnamon/raisins to oats if budget allows.", recovery: "Active recovery. Foam rolling (or tennis ball)." },
            { week: 9, dates: "Sep 22 - Sep 28", phase: 1, mileage: 8.5, longRun: 40, runFocus: "3-4 Easy Runs. One run 35-40 min.", strength: "2-3 Sessions: Focus on core strength (Plank, Bird-Dog).", nutrition: "Ensure ample water intake, especially after runs.", recovery: "Listen to your body. If feeling tired, reduce mileage slightly." },
            { week: 10, dates: "Sep 29 - Oct 5", phase: 1, mileage: 7.5, longRun: 30, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, focus on mobility.", nutrition: "Prioritize nutrient-dense, affordable foods.", recovery: "Crucial week for adaptation. Don't skip rest.", isRecovery: true },
            { week: 11, dates: "Oct 6 - Oct 12", phase: 1, mileage: 9.3, longRun: 45, runFocus: "3-4 Easy Runs. One run 40-45 min.", strength: "2-3 Sessions: Back to full intensity.", nutrition: "Continue to maximize frozen vegetable intake.", recovery: "Enjoy the process. Each run is a step towards your goal." },
            { week: 12, dates: "Oct 13 - Oct 19", phase: 1, mileage: 10.2, longRun: 50, runFocus: "3-4 Easy Runs. One run 45-50 min.", strength: "2-3 Sessions: Focus on glutes (Glute Bridges, Lunges).", nutrition: "Experiment with lentils in your crockpot for variety.", recovery: "Consistency builds endurance." },
            { week: 13, dates: "Oct 20 - Oct 26", phase: 1, mileage: 11.2, longRun: 55, runFocus: "3-4 Easy Runs. One run 50-55 min.", strength: "2-3 Sessions: Emphasize leg strength (Squats, Step-ups).", nutrition: "Ensure adequate protein from eggs and pintos.", recovery: "You're building a strong base!" },
            { week: 14, dates: "Oct 27 - Nov 2", phase: 1, mileage: 10.0, longRun: 45, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Re-evaluate food budget for any new affordable options.", recovery: "This rest helps your body adapt and prevent injury.", isRecovery: true },
            { week: 15, dates: "Nov 3 - Nov 9", phase: 1, mileage: 12.3, longRun: 60, runFocus: "3-4 Easy Runs. One run 55-60 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Continue to avoid fatback; focus on lean protein.", recovery: "Stay hydrated." },
            { week: 16, dates: "Nov 10 - Nov 16", phase: 1, mileage: 13.5, longRun: 65, runFocus: "3-4 Easy Runs. One run 60-65 min.", strength: "2-3 Sessions: Focus on core and stability.", nutrition: "Ensure your meals are balanced for energy.", recovery: "You're consistently increasing your endurance." },
            { week: 17, dates: "Nov 17 - Nov 23", phase: 1, mileage: 14.8, longRun: 70, runFocus: "3-4 Easy Runs. One run 65-70 min.", strength: "2-3 Sessions: Emphasize calf raises for running strength.", nutrition: "Prioritize whole, unprocessed foods.", recovery: "Listen to your body for signs of fatigue." },
            { week: 18, dates: "Nov 24 - Nov 30", phase: 1, mileage: 13.0, longRun: 60, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Review your diet and make any necessary adjustments.", recovery: "End of Phase 1. Great progress!", isRecovery: true },
            { week: 19, dates: "Dec 1 - Dec 7", phase: 2, mileage: 16.3, longRun: 75, runFocus: "3-4 Easy Runs. One run 70-75 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Maximize nutrient intake from affordable sources.", recovery: "Focus on consistent effort." },
            { week: 20, dates: "Dec 8 - Dec 14", phase: 2, mileage: 17.9, longRun: 80, runFocus: "3-4 Easy Runs. One run 75-80 min.", strength: "2-3 Sessions: Emphasize glute and hamstring strength.", nutrition: "Ensure enough complex carbs for energy.", recovery: "You're building significant endurance." },
            { week: 21, dates: "Dec 15 - Dec 21", phase: 2, mileage: 19.7, longRun: 85, runFocus: "3-4 Easy Runs. One run 80-85 min.", strength: "2-3 Sessions: Focus on core stability.", nutrition: "Continue to vary your frozen vegetable intake.", recovery: "Approaching 20 miles/week!" },
            { week: 22, dates: "Dec 22 - Dec 28", phase: 2, mileage: 17.5, longRun: 75, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Maintain consistent hydration.", recovery: "Enjoy the holidays, but stay consistent.", isRecovery: true },
            { week: 23, dates: "Dec 29 - Jan 4", phase: 2, mileage: 21.7, longRun: 90, runFocus: "3-4 Easy Runs. One run 85-90 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Re-evaluate budget for new affordable protein sources.", recovery: "New year, continued progress!" },
            { week: 24, dates: "Jan 5 - Jan 11", phase: 2, mileage: 23.9, longRun: 95, runFocus: "3-4 Easy Runs. One run 90-95 min.", strength: "2-3 Sessions: Focus on single-leg strength.", nutrition: "Ensure enough calories for increased activity.", recovery: "Listen to your body for fatigue." },
            { week: 25, dates: "Jan 12 - Jan 18", phase: 2, mileage: 26.3, longRun: 100, runFocus: "3-4 Easy Runs. One run 95-100 min.", strength: "2-3 Sessions: Emphasize calf and ankle strength.", nutrition: "Prioritize whole grains and plant-based protein.", recovery: "You're building a very strong base now." },
            { week: 26, dates: "Jan 19 - Jan 25", phase: 2, mileage: 23.5, longRun: 90, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Keep meals simple, nutritious, and budget-friendly.", recovery: "This recovery is vital for long-term health.", isRecovery: true },
            { week: 27, dates: "Jan 26 - Feb 1", phase: 2, mileage: 29.0, longRun: 105, runFocus: "3-4 Easy Runs. One run 100-105 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Focus on consistent meal timing for energy.", recovery: "You're approaching 30 miles/week!" },
            { week: 28, dates: "Feb 2 - Feb 8", phase: 2, mileage: 30.0, longRun: 110, runFocus: "3-4 Easy Runs. One run 105-110 min.", strength: "2-3 Sessions: Focus on core strength.", nutrition: "Continue to hydrate well throughout the day.", recovery: "Maintain steady effort, no need to push speed." },
            { week: 29, dates: "Feb 9 - Feb 15", phase: 2, mileage: 30.0, longRun: 115, runFocus: "3-4 Easy Runs. One run 110-115 min.", strength: "2-3 Sessions: Emphasize leg strength.", nutrition: "Ensure adequate protein for muscle repair.", recovery: "Consistency is your superpower." },
            { week: 30, dates: "Feb 16 - Feb 22", phase: 2, mileage: 27.0, longRun: 100, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Continue to prioritize sleep for recovery.", recovery: "End of Phase 2. Fantastic foundation.", isRecovery: true },
            { week: 31, dates: "Feb 23 - Mar 1", phase: 3, mileage: 30.0, longRun: 120, runFocus: "3-4 Easy Runs. One run 115-120 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Focus on whole, unprocessed foods.", recovery: "You're now running significant mileage!" },
            { week: 32, dates: "Mar 2 - Mar 8", phase: 3, mileage: 30.0, longRun: 125, runFocus: "3-4 Easy Runs. Add 4-6 x 100m strides.", strength: "2-3 Sessions: Focus on glute and core strength.", nutrition: "Ensure consistent intake of fruits/vegetables.", recovery: "Strides are for form, not all-out speed." },
            { week: 33, dates: "Mar 9 - Mar 15", phase: 3, mileage: 30.0, longRun: 130, runFocus: "3-4 Easy Runs. One run 125-130 min.", strength: "2-3 Sessions: Emphasize leg strength.", nutrition: "Prioritize complex carbs for sustained energy.", recovery: "Strides are for leg turnover, not speedwork yet." },
            { week: 34, dates: "Mar 16 - Mar 22", phase: 3, mileage: 27.0, longRun: 115, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Review your eating habits for areas to improve.", recovery: "Rest is crucial for preventing burnout.", isRecovery: true },
            { week: 35, dates: "Mar 23 - Mar 29", phase: 3, mileage: 32.0, longRun: 135, runFocus: "3-4 Easy Runs. One run 130-135 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Continue to hydrate consistently.", recovery: "You're building towards marathon-level mileage." },
            { week: 36, dates: "Mar 30 - Apr 5", phase: 3, mileage: 32.0, longRun: 140, runFocus: "3-4 Easy Runs. One run 135-140 min.", strength: "2-3 Sessions: Focus on core and stability.", nutrition: "Ensure adequate protein for muscle repair.", recovery: "Maintain easy pace on most runs." },
            { week: 37, dates: "Apr 6 - Apr 12", phase: 3, mileage: 32.0, longRun: 145, runFocus: "3-4 Easy Runs. One run 140-145 min.", strength: "2-3 Sessions: Emphasize calf and ankle strength.", nutrition: "Continue making your own cornbread for better nutrition.", recovery: "You're doing incredible work!" },
            { week: 38, dates: "Apr 13 - Apr 19", phase: 3, mileage: 29.0, longRun: 130, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Keep your diet consistent and budget-friendly.", recovery: "Be patient with yourself.", isRecovery: true },
            { week: 39, dates: "Apr 20 - Apr 26", phase: 3, mileage: 34.0, longRun: 150, runFocus: "3-4 Easy Runs. One run 145-150 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Prioritize sleep for recovery.", recovery: "You're now at a very strong base mileage." },
            { week: 40, dates: "Apr 27 - May 3", phase: 3, mileage: 34.0, longRun: 155, runFocus: "3-4 Easy Runs. One run 150-155 min.", strength: "2-3 Sessions: Focus on glute and hamstring strength.", nutrition: "Ensure enough calories for increased activity.", recovery: "Your faith will carry you through challenges." },
            { week: 41, dates: "May 4 - May 10", phase: 3, mileage: 34.0, longRun: 160, runFocus: "3-4 Easy Runs. One run 155-160 min.", strength: "2-3 Sessions: Emphasize leg strength.", nutrition: "Continue to hydrate well throughout the day.", recovery: "Consistency, consistency, consistency!" },
            { week: 42, dates: "May 11 - May 17", phase: 3, mileage: 30.0, longRun: 140, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Review your diet and make necessary adjustments.", recovery: "End of Phase 3. Ready for more.", isRecovery: true },
            { week: 43, dates: "May 18 - May 24", phase: 4, mileage: 35.0, longRun: 165, runFocus: "3-4 Easy Runs. One run 160-165 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Focus on whole, unprocessed foods.", recovery: "You've built an incredible foundation." },
            { week: 44, dates: "May 25 - May 31", phase: 4, mileage: 35.0, longRun: 170, runFocus: "3-4 Easy Runs. One run 165-170 min.", strength: "2-3 Sessions: Focus on core and stability.", nutrition: "Ensure consistent intake of fruits/vegetables.", recovery: "Maintain easy pace. Consider a slight incline." },
            { week: 45, dates: "Jun 1 - Jun 7", phase: 4, mileage: 35.0, longRun: 175, runFocus: "3-4 Easy Runs. One run 170-175 min.", strength: "2-3 Sessions: Emphasize leg strength.", nutrition: "Prioritize complex carbs for sustained energy.", recovery: "This consistent mileage is key for marathon prep." },
            { week: 46, dates: "Jun 8 - Jun 14", phase: 4, mileage: 31.0, longRun: 160, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Re-evaluate budget for new affordable options.", recovery: "Don't skip these recovery weeks.", isRecovery: true },
            { week: 47, dates: "Jun 15 - Jun 21", phase: 4, mileage: 35.0, longRun: 180, runFocus: "3-4 Easy Runs. One run 175-180 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Continue to hydrate consistently.", recovery: "You're building incredible resilience." },
            { week: 48, dates: "Jun 22 - Jun 28", phase: 4, mileage: 35.0, longRun: 185, runFocus: "3-4 Easy Runs. One run 180-185 min.", strength: "2-3 Sessions: Focus on glute and hamstring strength.", nutrition: "Ensure adequate protein for muscle repair.", recovery: "Your faith will continue to guide you." },
            { week: 49, dates: "Jun 29 - Jul 5", phase: 4, mileage: 35.0, longRun: 190, runFocus: "3-4 Easy Runs. One run 185-190 min.", strength: "2-3 Sessions: Emphasize calf and ankle strength.", nutrition: "Make your own cornbread for better nutrition.", recovery: "Almost at a full year of dedicated training!" },
            { week: 50, dates: "Jul 6 - Jul 12", phase: 4, mileage: 31.0, longRun: 170, runFocus: "Recovery Week. 3 Easy Runs. Reduce intensity.", strength: "2 Sessions: Lighter strength, active recovery.", nutrition: "Keep your diet consistent and budget-friendly.", recovery: "Reflect on how far you've come.", isRecovery: true },
            { week: 51, dates: "Jul 13 - Jul 19", phase: 4, mileage: 35.0, longRun: 195, runFocus: "3-4 Easy Runs. One run 190-195 min.", strength: "2-3 Sessions: Full body bodyweight routine.", nutrition: "Prioritize sleep for recovery.", recovery: "Ready for the next level of training." },
            { week: 52, dates: "Jul 20 - Jul 26", phase: 4, mileage: 35.0, longRun: 200, runFocus: "3-4 Easy Runs. One run 195-200 min.", strength: "2-3 Sessions: Focus on all bodyweight exercises.", nutrition: "Ensure enough calories for increased activity.", recovery: "One Year Complete! Incredible foundation built." }
        ];

        const phaseMap = {
            0: "Completing 5K Plan",
            1: "Phase 1: Foundation Building",
            2: "Phase 2: Continued Base Building",
            3: "Phase 3: Solidifying Base & Intro to Speed",
            4: "Phase 4: Maintaining & Preparing"
        };

        let mileageChart;

        const setupChart = (data) => {
            const ctx = document.getElementById('mileageChart').getContext('2d');
            
            const pointColors = data.map(d => d.isRecovery ? 'rgba(234, 179, 8, 0.8)' : 'rgba(120, 113, 108, 0.8)');
            const pointRadii = data.map(d => d.isRecovery ? 5 : 3);

            mileageChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => `W${d.week}`),
                    datasets: [{
                        label: 'Weekly Mileage',
                        data: data.map(d => d.mileage),
                        borderColor: '#A8A29E', // stone-400
                        backgroundColor: 'rgba(168, 162, 158, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: pointColors,
                        pointBorderColor: pointColors,
                        pointRadius: pointRadii,
                        pointHoverRadius: 7,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Miles per Week'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Training Week'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                title: (context) => `Week ${data[context[0].dataIndex].week}`,
                                afterTitle: (context) => data[context[0].dataIndex].dates,
                                label: (context) => `Mileage: ${context.raw.toFixed(1)} miles`,
                                afterLabel: (context) => data[context[0].dataIndex].isRecovery ? 'Recovery Week' : ''
                            }
                        }
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const chartElement = elements[0];
                            const dataIndex = chartElement.index;
                            const weekData = data[dataIndex];
                            updateAllDetails(weekData.week - 1);
                        }
                    }
                }
            });
        };

        const updateAllDetails = (weekIndex) => {
            const weekData = trainingData[weekIndex];
            if (!weekData) return;

            // Update KPI cards
            document.getElementById('kpi-week').textContent = weekData.week;
            document.getElementById('kpi-week-dates').textContent = weekData.dates;
            document.getElementById('kpi-mileage').textContent = weekData.mileage.toFixed(1);
            document.getElementById('kpi-long-run').textContent = weekData.longRun;

            // Update detail section header
            document.getElementById('detail-week-number').textContent = weekData.week;
            document.getElementById('detail-week-phase').textContent = phaseMap[weekData.phase];
            
            // Update detail content
            const detailContainer = document.getElementById('detail-content');
            detailContainer.innerHTML = `
                <div class="bg-stone-50 p-4 rounded-lg">
                    <h3 class="font-bold text-lg mb-2">üèÉ‚Äç‚ôÇÔ∏è Running Focus</h3>
                    <p class="text-stone-700">${weekData.runFocus}</p>
                </div>
                <div class="bg-stone-50 p-4 rounded-lg">
                    <h3 class="font-bold text-lg mb-2">üèãÔ∏è‚Äç‚ôÄÔ∏è Strength Training</h3>
                    <p class="text-stone-700">${weekData.strength}</p>
                </div>
                <div class="bg-stone-50 p-4 rounded-lg">
                    <h3 class="font-bold text-lg mb-2">üçé Nutrition Focus</h3>
                    <p class="text-stone-700">${weekData.nutrition}</p>
                </div>
                <div class="bg-stone-50 p-4 rounded-lg">
                    <h3 class="font-bold text-lg mb-2">üõå Recovery & Notes</h3>
                    <p class="text-stone-700">${weekData.recovery}</p>
                </div>
            `;
        };

        const filterChartByPhase = (phase) => {
            let filteredData = trainingData;
            if (phase !== 'all') {
                const phaseNumber = parseInt(phase, 10);
                // Include the 5K plan completion in Phase 1 for visualization
                if(phaseNumber === 1) {
                    filteredData = trainingData.filter(d => d.phase === 0 || d.phase === 1);
                } else {
                    filteredData = trainingData.filter(d => d.phase === phaseNumber);
                }
            }
            
            mileageChart.data.labels = filteredData.map(d => `W${d.week}`);
            mileageChart.data.datasets[0].data = filteredData.map(d => d.mileage);

            const pointColors = filteredData.map(d => d.isRecovery ? 'rgba(234, 179, 8, 0.8)' : 'rgba(120, 113, 108, 0.8)');
            const pointRadii = filteredData.map(d => d.isRecovery ? 5 : 3);
            mileageChart.data.datasets[0].pointBackgroundColor = pointColors;
            mileageChart.data.datasets[0].pointBorderColor = pointColors;
            mileageChart.data.datasets[0].pointRadius = pointRadii;
            
            mileageChart.options.onClick = (event, elements) => {
                if (elements.length > 0) {
                    const chartElement = elements[0];
                    const dataIndex = chartElement.index;
                    const weekData = filteredData[dataIndex];
                    updateAllDetails(weekData.week - 1);
                }
            };
            mileageChart.update();
        };

        document.getElementById('phase-filters').addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                const phase = e.target.dataset.phase;
                filterChartByPhase(phase);

                // Update active button style
                document.querySelectorAll('#phase-filters .nav-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                e.target.classList.add('active');
            }
        });
        
        const getWeekNumber = (d) => {
            d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));
            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);
            return weekNo;
        }

        const getCurrentTrainingWeek = () => {
            const startDate = new Date('2025-07-28T00:00:00');
            const now = new Date();
            if (now < startDate) return 0;
            const diff = now.getTime() - startDate.getTime();
            const diffWeeks = Math.floor(diff / (1000 * 60 * 60 * 24 * 7));
            return diffWeeks < 52 ? diffWeeks : 51;
        };

        window.onload = () => {
            setupChart(trainingData);
            const currentWeekIndex = getCurrentTrainingWeek();
            updateAllDetails(currentWeekIndex);
        };
    </script>
</body>
</html>
